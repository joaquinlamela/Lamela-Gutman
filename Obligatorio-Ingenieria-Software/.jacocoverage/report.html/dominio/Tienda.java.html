<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Tienda.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;Obligatorio-Ingenieria-Software&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">dominio</a> &gt; <span class="el_source">Tienda.java</span></div><h1>Tienda.java</h1><pre class="source lang-java linenums">package dominio;

import java.time.LocalTime;
import java.util.*;

public class Tienda {

    //Atributos
    private String direccion;
    private int numeroSucursal;
    private ArrayList&lt;Sucursal&gt; sucursales;
    private long telefono;
    private ArrayList&lt;Producto&gt; listaDeProductosEnStock;
    private int[] stockDeProductoPorId;
    private ArrayList&lt;Envase&gt; todosLosEnvasesDisponibles;
    private LocalTime horaInicio;
    private LocalTime horaFinalizacion;

    //Constructores
    public Tienda(int numeroSucursal, String direccion, ArrayList&lt;Sucursal&gt; sucursales,
            long telefono, Date horario, ArrayList&lt;Producto&gt; listaDeProductosEnStock,
            int[] stockDeProductoPorId, String paginaWeb, LocalTime horaI,
<span class="nc" id="L23">            LocalTime horaF, ArrayList&lt;Envase&gt; envases) {</span>
<span class="nc" id="L24">        this.setNumeroSucursal(numeroSucursal);</span>
<span class="nc" id="L25">        this.setDireccion(direccion);</span>
<span class="nc" id="L26">        this.setSucursales(sucursales);</span>
<span class="nc" id="L27">        this.setTelefono(telefono);</span>
<span class="nc" id="L28">        this.setListaDeProductosEnStock(listaDeProductosEnStock);</span>
<span class="nc" id="L29">        this.setStockDeProductoPorId(stockDeProductoPorId);</span>
<span class="nc" id="L30">        this.setTodosLosEnvasesDisponibles(envases);</span>
<span class="nc" id="L31">        this.setHoraInicio(horaI);</span>
<span class="nc" id="L32">        this.setHoraFinalizacion(horaF);</span>
<span class="nc" id="L33">    }</span>

<span class="fc" id="L35">    public Tienda() {</span>
<span class="fc" id="L36">        this.setNumeroSucursal(1);</span>
<span class="fc" id="L37">        this.setDireccion(&quot;Direccion&quot;);</span>
<span class="fc" id="L38">        this.setSucursales(new ArrayList&lt;Sucursal&gt;());</span>
<span class="fc" id="L39">        this.setTelefono(1);</span>
<span class="fc" id="L40">        this.setListaDeProductosEnStock(new ArrayList&lt;Producto&gt;());</span>
<span class="fc" id="L41">        this.setStockDeProductoPorId(new int[10]);</span>
<span class="fc" id="L42">        this.setTodosLosEnvasesDisponibles(new ArrayList&lt;Envase&gt;());</span>
<span class="fc" id="L43">        this.setHoraInicio(LocalTime.parse(&quot;10:00&quot;));</span>
<span class="fc" id="L44">        this.setHoraFinalizacion(LocalTime.parse(&quot;18:00&quot;));</span>
<span class="fc" id="L45">    }</span>

    //Getters &amp;&amp; Setters
    public String getDireccion() {
<span class="fc" id="L49">        return direccion;</span>
    }

    public void setDireccion(String direccion) {
<span class="fc bfc" id="L53" title="All 2 branches covered.">        if (!direccion.trim().equals(&quot;&quot;)) {</span>
<span class="fc" id="L54">            this.direccion = direccion;</span>
        } else {
<span class="fc" id="L56">            throw new RuntimeException(&quot;direccionNoVacia&quot;);</span>
        }
<span class="fc" id="L58">    }</span>

    public void setSucursales(ArrayList&lt;Sucursal&gt; sucursales) {
<span class="fc" id="L61">        this.sucursales = sucursales;</span>
<span class="fc" id="L62">    }</span>

    public long getTelefono() {
<span class="fc" id="L65">        return telefono;</span>
    }

    public void setTelefono(long telefono) {
<span class="fc bfc" id="L69" title="All 2 branches covered.">        if (telefono &gt;= 1) {</span>
<span class="fc" id="L70">            this.telefono = telefono;</span>
        } else {
<span class="fc" id="L72">            throw new RuntimeException(&quot;telefonoMayorA0&quot;);</span>
        }
<span class="fc" id="L74">    }</span>

    public ArrayList&lt;Producto&gt; getListaDeProductosEnStock() {
<span class="fc" id="L77">        return listaDeProductosEnStock;</span>
    }

    public void setListaDeProductosEnStock(ArrayList&lt;Producto&gt; listaDeProductosEnStock) {
<span class="fc" id="L81">        this.listaDeProductosEnStock = listaDeProductosEnStock;</span>
<span class="fc" id="L82">    }</span>

    public int[] getStockDeProductoPorId() {
<span class="fc" id="L85">        return stockDeProductoPorId;</span>
    }

    public void setStockDeProductoPorId(int[] stockDeProductoPorId) {
<span class="fc" id="L89">        this.stockDeProductoPorId = stockDeProductoPorId;</span>
<span class="fc" id="L90">    }</span>

    public int getNumeroSucursal() {
<span class="nc" id="L93">        return numeroSucursal;</span>
    }

    public void setNumeroSucursal(int numeroSucursal) {
<span class="fc" id="L97">        this.numeroSucursal = numeroSucursal;</span>
<span class="fc" id="L98">    }</span>

    public ArrayList&lt;Sucursal&gt; getSucursales() {
<span class="fc" id="L101">        return sucursales;</span>
    }

    public LocalTime getHoraInicio() {
<span class="nc" id="L105">        return horaInicio;</span>
    }

    public void setHoraInicio(LocalTime horaInicio) {
<span class="fc" id="L109">        this.horaInicio = horaInicio;</span>
<span class="fc" id="L110">    }</span>

    public LocalTime getHoraFinalizacion() {
<span class="nc" id="L113">        return horaFinalizacion;</span>
    }

    public void setHoraFinalizacion(LocalTime horaFinalizacion) {
<span class="fc" id="L117">        this.horaFinalizacion = horaFinalizacion;</span>
<span class="fc" id="L118">    }</span>

    public ArrayList&lt;Envase&gt; getTodosLosEnvasesDisponibles() {
<span class="nc" id="L121">        return todosLosEnvasesDisponibles;</span>
    }

    public void setTodosLosEnvasesDisponibles(ArrayList&lt;Envase&gt; todosLosEnvasesDisponibles) {
<span class="fc" id="L125">        this.todosLosEnvasesDisponibles = todosLosEnvasesDisponibles;</span>
<span class="fc" id="L126">    }</span>

    //Metodos:
    public void agregarProducto(Producto producto) {
<span class="fc" id="L130">        producto.setCodigoIdentificador(this.listaDeProductosEnStock.size() + 1);</span>
<span class="fc bfc" id="L131" title="All 2 branches covered.">        if (!this.listaDeProductosEnStock.contains(producto)) {</span>
<span class="fc" id="L132">            this.listaDeProductosEnStock.add(producto);</span>
        }
<span class="fc" id="L134">    }</span>

    public void eliminarProducto(Producto producto) {
<span class="pc bpc" id="L137" title="1 of 2 branches missed.">        if (this.getStockDeProductoPorId()[producto.getCodigoIdentificador()] == 0) {</span>
<span class="fc" id="L138">            this.listaDeProductosEnStock.remove(producto);</span>
        }
<span class="fc" id="L140">    }</span>

    public void eliminarProductoSinImportarStock(Producto prod) {
<span class="nc bnc" id="L143" title="All 2 branches missed.">        if (this.getListaDeProductosEnStock().contains(prod)) {</span>
<span class="nc" id="L144">            this.listaDeProductosEnStock.remove(prod);</span>
        }
<span class="nc" id="L146">    }</span>

    public void agregarSucursal(Sucursal s) {
<span class="fc" id="L149">        s.setNumeroSucursal(this.sucursales.size() + 1);</span>
<span class="fc bfc" id="L150" title="All 2 branches covered.">        if (!this.sucursales.contains(s)) {</span>
<span class="fc" id="L151">            this.sucursales.add(s);</span>
        }
<span class="fc" id="L153">    }</span>

    //No se cambia el id, porque no se accede a el desde frontend
    public void eliminarSucursal(Sucursal s) {
<span class="fc bfc" id="L157" title="All 2 branches covered.">        if (this.sucursales.contains(s)) {</span>
<span class="fc" id="L158">            this.sucursales.remove(s);</span>
        }
<span class="fc" id="L160">    }</span>

    public void agregarEnvase(Envase e) {
<span class="nc" id="L163">        e.setIdIdentificador(this.todosLosEnvasesDisponibles.size() + 1);</span>
<span class="nc bnc" id="L164" title="All 2 branches missed.">        if (!this.todosLosEnvasesDisponibles.contains(e)) {</span>
<span class="nc" id="L165">            this.todosLosEnvasesDisponibles.add(e);</span>
        }
<span class="nc" id="L167">    }</span>

    public Producto obtenerElMasVendidos(ArrayList&lt;Producto&gt; listaProd) {
<span class="nc" id="L170">        int max = Integer.MIN_VALUE;</span>
<span class="nc" id="L171">        Producto producto = new Producto();</span>
<span class="nc bnc" id="L172" title="All 2 branches missed.">        for (int i = 0; i &lt; listaProd.size(); i++) {</span>
<span class="nc bnc" id="L173" title="All 2 branches missed.">            if (listaProd.get(i).getCantidadVendidos() &gt; max) {</span>
<span class="nc" id="L174">                producto = listaProd.get(i);</span>
<span class="nc" id="L175">                max = listaProd.get(i).getCantidadVendidos();</span>
            }
        }
<span class="nc" id="L178">        listaProd.remove(producto);</span>
<span class="nc" id="L179">        return producto;</span>
    }

    public ArrayList&lt;Producto&gt; obtenerLos5MasVendidos() {
<span class="nc" id="L183">        ArrayList&lt;Producto&gt; todosLosProductosDelSistema = this.getListaDeProductosEnStock();</span>
<span class="nc" id="L184">        ArrayList&lt;Producto&gt; copiaDeTodosLosProductosDelSistema = new ArrayList();</span>
<span class="nc bnc" id="L185" title="All 2 branches missed.">        for (int i = 0; i &lt; todosLosProductosDelSistema.size(); i++) {</span>
<span class="nc bnc" id="L186" title="All 2 branches missed.">            if (!copiaDeTodosLosProductosDelSistema.contains(todosLosProductosDelSistema.get(i))) {</span>
<span class="nc" id="L187">                copiaDeTodosLosProductosDelSistema.add(todosLosProductosDelSistema.get(i));</span>
            }
        }
<span class="nc" id="L190">        ArrayList&lt;Producto&gt; los5MasVendidosInversa = new ArrayList&lt;&gt;();</span>
        Producto producto;
<span class="nc bnc" id="L192" title="All 2 branches missed.">        for (int i = 0; i &lt; 5; i++) {</span>
<span class="nc" id="L193">            Producto prodANoAgregar = new Producto();</span>
<span class="nc" id="L194">            producto = this.obtenerElMasVendidos(copiaDeTodosLosProductosDelSistema);</span>
<span class="nc bnc" id="L195" title="All 4 branches missed.">            if (!(producto.getCodigoIdentificador() == prodANoAgregar.getCodigoIdentificador() &amp;&amp; producto.getNombre().equals(prodANoAgregar.getNombre()))) {</span>
<span class="nc" id="L196">                los5MasVendidosInversa.add(producto);</span>
            }
        }
<span class="nc" id="L199">        Collections.reverse(los5MasVendidosInversa);</span>
<span class="nc" id="L200">        return los5MasVendidosInversa; </span>
    }

    @Override
    public String toString() {
<span class="nc" id="L205">        return &quot;Tienda{&quot; + &quot;direccion=&quot; + direccion </span>
                + &quot;, numeroSucursal=&quot; + numeroSucursal + &quot;, sucursales=&quot; + sucursales
                + &quot;, telefono=&quot; + telefono 
                + &quot;, listaDeProductosEnStock=&quot;+ listaDeProductosEnStock 
<span class="nc" id="L209">                + &quot;, stockDeProductoPorId=&quot; + Arrays.toString(stockDeProductoPorId)</span>
                + &quot;, todosLosEnvasesDisponibles=&quot; + todosLosEnvasesDisponibles
                + &quot;, horaInicio=&quot; + horaInicio 
                + &quot;, horaFinalizacion=&quot; + horaFinalizacion + '}';
    }
    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>